<?php

defined('YII_DEBUG') or define('YII_DEBUG', {{ this.goal.env == 'prod' ? 'false' : 'true');
defined('YII_ENV') or define('YII_ENV', '{{ this.goal.env }}');

require(__DIR__ . '/../vendor/autoload.php');

$params = yii\helpers\ArrayHelper::merge(
{% for k,v in this.goal.parents %}
    require(__DIR__ . '/../vendor/{{k}}/config/params.php'),
{% endfor %}
    require(__DIR__ . '/../src/config/params.php')
);

$config = yii\helpers\ArrayHelper::merge(
{% for k,v in this.goal.parents %}
    require(__DIR__ . '/../vendor/{{k}}/config/main.php'),
{% endfor %}
    require(__DIR__ . '/../src/config/main.php'),
    ['params' => $params]
);

$application = new yii\web\Application($config);
$application->run();
